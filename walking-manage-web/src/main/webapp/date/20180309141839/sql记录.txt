 <select id="getAppIndexBBSListByAreaCode" resultType="com.ikongjian.front.resultvo.DecorationBBSResulVo" parameterType="java.lang.String">
    	SELECT *
		FROM
		(
            (
                SELECT
                    f.id AS id,
                    '' as parentId,
                    f.title AS title,
                    f.summary as summary,
                    f.content AS content,
                    '常见问题' as name,
                    1 AS type,
                    f.head_img_url AS headImgUrl,
                    '' AS userName,
                    0 AS userId,
                    f.create_time AS createTime,
                    f.personView AS  pv,
                    DATE_FORMAT(f.create_time, '%m-%d %H:%i') AS formatCreateTime,0 as commentCount,
                    f.personView as personViewNum
                FROM
                    www.faqs f
                LEFT JOIN www.faqs_area fa ON f.id = fa.faqs_id
                LEFT JOIN www.faqs_category fc ON f.category_id = fc.id
                LEFT JOIN www.faqs_category fc1 ON fc.parent_id = fc1.id
                WHERE
                    f.state = 0
                AND (
                    fa.area_code = #{areaCode,jdbcType=VARCHAR}
                    OR fa.area_code IS NULL
                )
                AND fc1.id = 2
                ORDER BY
                    f.create_time DESC
                LIMIT 10
            )
			UNION
            (
                SELECT
                    f.id AS id,
                    '' as parentId,
                    f.title AS title,
                    f.summary as summary,
                    f.content AS content,
                    '家装知识' as name,
                    2 AS type,
                    f.head_img_url AS headImgUrl,
                    '' AS userName,
                    0 AS userId,
                    f.create_time AS createTime,
                    f.personView AS  pv,
                    DATE_FORMAT(f.create_time, '%m-%d %H:%i') AS formatCreateTime,0 as commentCount,
                    f.personView as personViewNum
                FROM
                    www.faqs f
                LEFT JOIN www.faqs_area fa ON f.id = fa.faqs_id
                LEFT JOIN www.faqs_category fc ON f.category_id = fc.id
                LEFT JOIN www.faqs_category fc1 ON fc.parent_id = fc1.id
                WHERE
                    f.state = 0
                AND (
                    fa.area_code = #{areaCode,jdbcType=VARCHAR}
                    OR fa.area_code IS NULL
                )
                AND fc1.id = 1
                ORDER BY
                    f.create_time DESC
                LIMIT 10
            )
			UNION
            (
                SELECT
                    n.id AS id,
                    '' as parentId,
                    n.title AS title,
                    n.note as summary,
                    ni.content AS content,
                    '装修那些事' as name,
                    3 AS type,
                    n.logo AS headImgUrl,
                    '' AS userName,
                    0 AS userId,
                    n.app_create_time AS createTime,
                    n.personView AS  pv,
                    DATE_FORMAT(n.app_create_time, '%m-%d %H:%i') AS formatCreateTime,0 as commentCount,
                    n.personView as personViewNum
                FROM
                    www.news n
                LEFT JOIN www.news_area na ON n.id = na.new_id
                LEFT JOIN www.news_info ni ON ni.news_id = n.id
                WHERE
                    n.state = 0 
                AND (
                    na.area_code = #{areaCode,jdbcType=VARCHAR}
                    OR na.area_code IS NULL
                )
                AND (ni.platform = 0 OR ni.platform = 2)
                ORDER BY
                    n.create_time DESC
                LIMIT 10
            )
			UNION
            (
                SELECT
                    d.id AS id,
                    '' as parentId,
                    d.title AS title,
                    '' as summary,
                    ddc.content AS content,
                    '装修笔记' as name,
                    4 AS type,
                    ddci.img_url AS headImgUrl,
                    ui. NAME AS userName,
                    d.user_id AS userId,
                    d.create_time AS createTime,
                    d.pv AS pv,
                    DATE_FORMAT(d.create_time, '%m-%d %H:%i') AS formatCreateTime,
                    (
					select count(id) from decorate_diary_comment where diary_id = d.id
				) as commentCount,
                d.pv as personViewNum
                FROM
                    www.decorate_diary d
                LEFT JOIN www.decorate_diary_content ddc ON d.id = ddc.diary_id AND ddc.state = 0
                LEFT JOIN www.decorate_diary_content_img ddci ON ddci.content_id = ddc.id AND ddci.state = 0
                LEFT JOIN www.decorate_diary_stage dds ON dds.id = ddc.stage_id  AND dds.sort = 0
                LEFT JOIN www.user_info ui ON d.user_id = ui.user_id
                WHERE d.state = 30
                  AND DATEDIFF(NOW(), d.create_time) <![CDATA[<=]]> 10
                GROUP BY d.id
                ORDER BY commentCount DESC, d.praise_num DESC
                LIMIT 10
            )
			UNION
            (
               SELECT
                   a.id AS id,
                   a.question_id as parentId,
                   a.title AS title,
                   '' AS summary,
                   a.content AS content,
                   '问答达人' as name,
                   5 AS type,
                   a.url AS headImgUrl,
                   a. NAME AS userName,
                   a.user_id AS userId,
                   a.create_time as createTime,
                   ifnull((select sum(1) from qa_answer_comment com where com.answer_id = a.id), 0) AS commentCount,
                   a.personViewNum,
                   a.pv as pv,
                   DATE_FORMAT(a.create_time, '%m-%d %H:%i') AS formatCreateTime
               FROM
                   (select * from
                      (SELECT
                           qaa.id,
                           qaa.question_id,
                           qaa.content,
                           qaa.create_time,
                           qaa.praise_num,
                           qaq.title,
                           qaa.user_id,
                           ui. NAME,
                           qai.url,
                           qaq.personView as pv,
                           qaq.create_time as qaCreateTime,
                           qaq.personView as personViewNum
                       FROM qa_answer qaa
                       LEFT JOIN qa_question qaq ON qaa.question_id = qaq.id
                       LEFT JOIN user_info ui ON ui.user_id = qaa.user_id
                       LEFT JOIN qa_img qai ON qai.answer_id = qaa.id
                       where DATEDIFF(NOW(),qaa.create_time) <![CDATA[<=]]> 10
                       ORDER BY qaa.praise_num DESC
                       ) b
                   where b.praise_num <![CDATA[>=]]> 5
                   GROUP BY b.question_id
                   ORDER BY b.praise_num DESC
                   limit 0,10
                   )a
               order by a.qaCreateTime desc
            )
        ) t
        WHERE
            1 = 1
        ORDER BY
        t.createTime DESC
        limit ${start},${size}
    </select>